<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Idea插件开发记录 | SictiyLeon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="环境  下载idea社区版 配置jdk 配置IntelliJ Platform Plugin Sdk Project Structure-&amp;gt;sdks: 点击+，选择intellij…按提示继续，目录选择社区版安装路径就好 导入idea源码：选择sourcePath-&amp;gt;+.   创建简单工程  create new project -&amp;gt; intellij platform plug">
<meta property="og:type" content="article">
<meta property="og:title" content="Idea插件开发记录">
<meta property="og:url" content="http://yoursite.com/2019/04/18/idea插件开发记录/index.html">
<meta property="og:site_name" content="SictiyLeon">
<meta property="og:description" content="环境  下载idea社区版 配置jdk 配置IntelliJ Platform Plugin Sdk Project Structure-&amp;gt;sdks: 点击+，选择intellij…按提示继续，目录选择社区版安装路径就好 导入idea源码：选择sourcePath-&amp;gt;+.   创建简单工程  create new project -&amp;gt; intellij platform plug">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2020-01-16T03:28:47.644Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Idea插件开发记录">
<meta name="twitter:description" content="环境  下载idea社区版 配置jdk 配置IntelliJ Platform Plugin Sdk Project Structure-&amp;gt;sdks: 点击+，选择intellij…按提示继续，目录选择社区版安装路径就好 导入idea源码：选择sourcePath-&amp;gt;+.   创建简单工程  create new project -&amp;gt; intellij platform plug">
  
  <link rel="stylesheet" href="/css/index.css">
</head>
</html>
<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">SictiyLeon</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://github.com/Sictiy" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
          
            <a href="https://www.instagram.com/sictiy/" target="_blank" class="nav-icn iconfont icon-instagram"></a>
          
        
          
            <a href="https://www.facebook.com/xml.xml.75" target="_blank" class="nav-icn iconfont icon-facebook"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/categories" class="nav-menu ">CATEGORIES</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">Idea插件开发记录</h2>
  <p class="sub">Apr 18, 2019</p>
  <article class="content">
    <h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><hr>
<ul>
<li>下载<a href="https://github.com/JetBrains/intellij-community" target="_blank" rel="noopener">idea社区版</a></li>
<li>配置jdk</li>
<li>配置IntelliJ Platform Plugin Sdk<ul>
<li>Project Structure-&gt;sdks:</li>
<li>点击+，选择intellij…按提示继续，目录选择社区版安装路径就好</li>
<li>导入idea源码：选择sourcePath-&gt;+.</li>
</ul>
</li>
<li><p>创建简单工程</p>
<ul>
<li>create new project -&gt; intellij platform plugin</li>
<li><p>项目结构：</p>
<blockquote>
<p>plugin</p>
<blockquote>
<p>src<br>resources</p>
<blockquote>
<p>META_INF</p>
<blockquote>
<p>plugin.xml</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</li>
<li><p>src为源码目录，plugin.xml为配置文件，需要在这里添加自己实现的action service等</p>
</li>
</ul>
</li>
</ul>
<h2 id="插件入口"><a href="#插件入口" class="headerlink" title="插件入口"></a>插件入口</h2><hr>
<ul>
<li>插件入口即在idea上部分菜单栏加入一个按钮，点击按钮则运行插件</li>
<li><p>继承抽象类AnAction， 实现actionPerformed方法：</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAction</span> <span class="keyword">extends</span> <span class="title">AnAction</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">// start方法，就类似于了平时的main方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(@NotNull AnActionEvent e)</span> </span>&#123;</span><br><span class="line">        com.myPlugin.Main.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置plugin.xml</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">class</span>=<span class="string">"com.myPlugin.MyAction"</span> <span class="attr">text</span>=<span class="string">"myPlugin"</span> <span class="attr">id</span>=<span class="string">"myPlugin"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">add-to-group</span> <span class="attr">group-id</span>=<span class="string">"ToolsMenu"</span> <span class="attr">anchor</span>=<span class="string">"first"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- add-to-group 定义插件的入口放在菜单的哪个菜单项下面，anchor定义插入的位置--&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="持久化"><a href="#持久化" class="headerlink" title="持久化"></a>持久化</h2><hr>
<ul>
<li><p>需要实现PersistenStateComponent接口</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span>(name = <span class="string">"myName"</span>, storages = &#123;<span class="meta">@Storage</span>(<span class="string">"myName.xml"</span>)&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyState</span> <span class="keyword">implements</span> <span class="title">PersistentStateComponent</span>&lt;<span class="title">Config</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Config config;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MyState <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ServiceManager.getService(MyState.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">// getState获取到的bean会自动保存</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Config <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">// 自动从文件中加载bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadState</span><span class="params">(@NotNull Config state)</span> </span>&#123;</span><br><span class="line">        config = state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfig</span><span class="params">(Config config)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.config = config;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>plugin.xml中配置：</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">applicationService</span> <span class="attr">serviceInterface</span>=<span class="string">"com.myPlugin.MyState"</span> <span class="attr">serviceImplementation</span>=<span class="string">"com.myPlugin.MyState"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="配置入口"><a href="#配置入口" class="headerlink" title="配置入口"></a>配置入口</h2><hr>
<ul>
<li>实现SearchableConfigurable即可在setting中增加一个配置界面，需要实现的方法有：<ul>
<li>createComponent(): 配置界面的ui，可以使用可使用工具编写</li>
<li>isModified(): 影响界面中应用按钮是否可点击</li>
<li>apply(): 点击应用按钮时调用</li>
</ul>
</li>
<li><p>plugin.xml中配置：</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">applicationConfigurable</span> <span class="attr">instance</span>=<span class="string">"com.myPlugin.MyConfigurable"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="idea中swing可视化"><a href="#idea中swing可视化" class="headerlink" title="idea中swing可视化"></a>idea中swing可视化</h2><hr>
<ul>
<li>New -&gt; Gui Form</li>
<li>打开myGui.form添加部件，监听等</li>
<li>完成后打开同级目录的myGui.java</li>
<li>右键 -&gt; generate -&gt; form main，如果提示the form bound to…, 需要回到gui designer 给跟jpanel设置一个名字</li>
</ul>

  </article>
  <footer class="f-cf">
    
      <a href="/2019/04/24/algorithm/" class="link f-fl">⟵算法草稿本</a>
    
    
      <a href="/2019/04/08/study-go/" class="link f-fr">go学习笔记⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  xlm10600@gmail.com
  
    
      
        · <a href="https://github.com/Sictiy" target="_blank" class="nav-icn">GitHub</a>
      
    
      
        · <a href="https://www.instagram.com/sictiy/" target="_blank" class="nav-icn">Instagram</a>
      
    
      
        · <a href="https://www.facebook.com/xml.xml.75" target="_blank" class="nav-icn">Facebook</a>
      
    
  

  <span class="copyright">All rights reserved @Sictiy Xu</span>

  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">&nbsp;&nbsp;访问量<span id="busuanzi_value_site_pv"></span>次</span>
  <span class="post-meta-divider">|</span>
  <span id="busuanzi_container_site_uv">访客数<span id="busuanzi_value_site_uv"></span>人</span>
</footer>

  </div>
</body>
</html>