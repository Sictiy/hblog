<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>服务器热更 | 乐敏的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="如何确定需要更新的表\class文件 cmd命令传入 放在指定的文件夹   代码热更,热替换 classReloader premain可以获取instrumentation 编译成jar,需要一些属性 启动参数：-javaagent 需要再启动的时候就开启代理   agentmain也可以拿到instrumentation 编译成jar updatemain进程 通过pid拿到游戏服的vm v">
<meta property="og:type" content="article">
<meta property="og:title" content="服务器热更">
<meta property="og:url" content="http://yoursite.com/blog/2019/05/20/服务器热更/index.html">
<meta property="og:site_name" content="乐敏的个人博客">
<meta property="og:description" content="如何确定需要更新的表\class文件 cmd命令传入 放在指定的文件夹   代码热更,热替换 classReloader premain可以获取instrumentation 编译成jar,需要一些属性 启动参数：-javaagent 需要再启动的时候就开启代理   agentmain也可以拿到instrumentation 编译成jar updatemain进程 通过pid拿到游戏服的vm v">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2020-01-16T03:28:47.645Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="服务器热更">
<meta name="twitter:description" content="如何确定需要更新的表\class文件 cmd命令传入 放在指定的文件夹   代码热更,热替换 classReloader premain可以获取instrumentation 编译成jar,需要一些属性 启动参数：-javaagent 需要再启动的时候就开启代理   agentmain也可以拿到instrumentation 编译成jar updatemain进程 通过pid拿到游戏服的vm v">
  
  <link rel="stylesheet" href="/blog/css/index.css">
</head>
</html>
<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">SictiyLeon</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://github.com/Sictiy" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
          
            <a href="https://www.instagram.com/sictiy/" target="_blank" class="nav-icn iconfont icon-instagram"></a>
          
        
          
            <a href="https://www.facebook.com/xml.xml.75" target="_blank" class="nav-icn iconfont icon-facebook"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/blog/" class="nav-menu ">HOME</a>
          
        
            <a href="/blog/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/blog/categories" class="nav-menu ">CATEGORIES</a>
          
        
            <a href="/blog/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">服务器热更</h2>
  <p class="sub">May 20, 2019</p>
  <article class="content">
    <ul>
<li>如何确定需要更新的表\class文件<ul>
<li>cmd命令传入</li>
<li>放在指定的文件夹</li>
</ul>
</li>
<li>代码热更,热替换<ul>
<li>classReloader</li>
<li>premain可以获取instrumentation<ul>
<li>编译成jar,需要一些属性</li>
<li>启动参数：-javaagent</li>
<li>需要再启动的时候就开启代理</li>
</ul>
</li>
<li>agentmain也可以拿到instrumentation<ul>
<li>编译成jar</li>
<li>updatemain进程 通过pid拿到游戏服的vm</li>
<li>vm.loadAgent() 调用loadAgent.jar的loadAgent函数</li>
<li>不需要在启动的时候开启代理</li>
</ul>
</li>
<li>instrumentation.redifineClass替换class文件</li>
<li>ClassFileTransformer</li>
</ul>
</li>
<li>数据热更<ul>
<li>需要reload的方法注册在map中</li>
<li>传入类名，在map中找到对应的reload方法，invoke</li>
</ul>
</li>
</ul>

  </article>
  <footer class="f-cf">
    
      <a href="/blog/2019/09/20/dig/" class="link f-fl">⟵炮弹挖坑问题</a>
    
    
      <a href="/blog/2019/05/16/spider/" class="link f-fr">Spider存储引擎尝试⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  xlm10600@gmail.com
  
    
      
        · <a href="https://github.com/Sictiy" target="_blank" class="nav-icn">GitHub</a>
      
    
      
        · <a href="https://www.instagram.com/sictiy/" target="_blank" class="nav-icn">Instagram</a>
      
    
      
        · <a href="https://www.facebook.com/xml.xml.75" target="_blank" class="nav-icn">Facebook</a>
      
    
  

  <span class="copyright">All rights reserved @Sictiy Xu</span>

  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">&nbsp;&nbsp;访问量<span id="busuanzi_value_site_pv"></span>次</span>
  <span class="post-meta-divider">|</span>
  <span id="busuanzi_container_site_uv">访客数<span id="busuanzi_value_site_uv"></span>人</span>
</footer>

  </div>
</body>
</html>